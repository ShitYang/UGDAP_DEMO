
using UnityEngine;

[CreateAssetMenu]
public class PowerBlood : SkillData
{
    //???????????
    public float damageMultiplier = 2f;

    //???????????
    public float healthReuctionRatio = 0.5f;

    //???????????????
    public float maxHealthReuctionRatio = 0.5f;

    public override void Activate(GameObject player)
    {
        //??????????????????????????????????
        
        UPlayerController controller = player.GetComponent<UPlayerController>();
        HealthComponent health = controller.GetHealthComponent();
        
        if(health!=null)
        {
            float originalMax = health.GetMaxHealthVal();
            float newMax = originalMax * maxHealthReuctionRatio;
            health.SetMaxHealthVal(newMax);
            Debug.Log($"????????????????????{originalMax}???{newMax}");

            float originalCurrent = health.currentHealthVal;
            health.currentHealthVal = originalCurrent * healthReuctionRatio;
            Debug.Log($"????????????????????{originalCurrent}???{health.currentHealthVal}");
        }else
        {
            Debug.LogWarning("???????δ???HealComponent");
        }

        if(controller!=null)
        {
            float originalAttack = controller.GetAttackVal();
            float newAttack = originalAttack * damageMultiplier;
            controller.SetUpAttackValue(newAttack);
            Debug.Log($"???????????????????{originalAttack}??????{newAttack}");

        }
        else
        {
            Debug.LogWarning("???????δ???UPlayerController");
        }
    }
}